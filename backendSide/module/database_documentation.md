

โ ููุฎุต ุนุงู:
ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุตููุฉ ููุนูู ูุณูู ุฅููุชุฑููู ูุญุชูู ุนูู ุจุงุฆุนูู ูููุชุฌุงุช ููุดุชุฑูู.

ูู ุณูุฉ ูููู ุฃู ุชุญุชูู ููุชุฌุงุช ูู ุจุงุฆุนูู ูุฎุชูููู.

ุงูุฏูุน ูุชู ุฏูุนุฉ ูุงุญุฏุฉ ูููููุนุ ุซู ูุชู ุชูุฒูุน ุงูุฃุฑุจุงุญ ุฏุงุฎูููุง ุนูู ุงูุจุงุฆุนูู.

ุฃุฑุจุงุญ ูู ุจุงุฆุน ุชูุณุฌู ูู balance ูููููู ุณุญุจูุง ุนู ุทุฑูู Payouts API.


## ๐ค ุฌุฏูู: `users`

| ุงุณู ุงูุญูู      | ุงูููุน                | ุงููุตู ุงูููู                 | ูุธููุฉ ุงูุญูู ุจุงูุนุฑุจู                                   |
| -------------- | -------------------- | --------------------------- | ----------------------------------------------------- |
| `id`           | INT (PK)             | ูุนุฑู ูุฑูุฏ ูููุณุชุฎุฏู          | ุฑูู ุชุนุฑููู ููู ูุณุชุฎุฏู ูุง ูุชูุฑุฑ                        |
| `name`         | VARCHAR(30)          | ุงุณู ุงููุณุชุฎุฏู (ูุฑูุฏ)         | ุงุณู ุงููุณุชุฎุฏู ุงูุฐู ูุธูุฑ ููุขุฎุฑูู                        |
| `email`        | VARCHAR(40)          | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุฑูุฏ)    | ุงูุจุฑูุฏ ุงูุฐู ูุณุชุฎุฏูู ุงููุณุชุฎุฏู ูุชุณุฌูู ุงูุฏุฎูู            |
| `paypal_email` | VARCHAR(100)         | ุจุฑูุฏ PayPal ุงูุฎุงุต ุจุงููุณุชุฎุฏู | ูุณุชุฎุฏู ูุชุญููู ุงูุฃุฑุจุงุญ ูู ุงููููุน ูููุณุชุฎุฏู              |
| `password`     | TEXT                 | ูููุฉ ูุฑูุฑ ูุดูุฑุฉ             | ูุชู ุงุณุชุฎุฏุงููุง ูุชุณุฌูู ุงูุฏุฎูู ูุงูุชุญูู ูู ุงููููุฉ         |
| `role`         | ENUM('admin','user') | ููุน ุงููุณุชุฎุฏู                | ูุญุฏุฏ ูุง ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุณุคูู (admin) ุฃู ูุณุชุฎุฏู ุนุงุฏู |
| `blanace`      | DECIMAL(10,2)        | ุงูุฑุตูุฏ ุงููุชุงุญ ูููุณุชุฎุฏู      | ุฃุฑุจุงุญ ุงููุณุชุฎุฏู ูู ุจูุน ุงูููุชุฌุงุช                        |
| `image_url`    | TEXT                 | ุฑุงุจุท ุตูุฑุฉ ุงููุณุชุฎุฏู          | ุตูุฑุฉ ุงูููู ุงูุดุฎุตู ูููุณุชุฎุฏู                            |
| `create_at`    | TIMESTAMP            | ุชุงุฑูุฎ ุฅูุดุงุก ุงูุญุณุงุจ          | ูุชู ุชู ุชุณุฌูู ูุฐุง ุงููุณุชุฎุฏู ูู ุงููููุน                   |

---

## ๐ ุฌุฏูู: `category`

| ุงุณู ุงูุญูู   | ุงูููุน       | ุงููุตู ุงูููู         | ูุธููุฉ ุงูุญูู ุจุงูุนุฑุจู                    |
| ----------- | ----------- | ------------------- | -------------------------------------- |
| `id`        | INT (PK)    | ูุนุฑู ูุฑูุฏ ููุชุตููู   | ุฑูู ุชุนุฑููู ููู ุชุตููู ููุชุฌุงุช            |
| `name`      | VARCHAR(30) | ุงุณู ุงูุชุตููู (ูุฑูุฏ)  | ูุซู: ุฅููุชุฑูููุงุชุ ููุงุจุณุ ุฃุฏูุงุช ููุฒููุฉ   |
| `create_at` | TIMESTAMP   | ุชุงุฑูุฎ ุฅูุดุงุก ุงูุชุตููู | ุชุงุฑูุฎ ุฅุถุงูุฉ ุงูุชุตููู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช |

---

## ๐ฆ ุฌุฏูู: `product`

| ุงุณู ุงูุญูู         | ุงูููุน         | ุงููุตู ุงูููู                      | ูุธููุฉ ุงูุญูู ุจุงูุนุฑุจู                          |
| ----------------- | ------------- | -------------------------------- | -------------------------------------------- |
| `id`              | INT (PK)      | ูุนุฑู ูุฑูุฏ ููููุชุฌ                 | ุฑูู ุชุนุฑููู ูุง ูุชูุฑุฑ ููู ููุชุฌ                 |
| `user_id`         | INT (FK)      | ูุนุฑู ุงูุจุงุฆุน                      | ูุฑุจุท ุงูููุชุฌ ุจุงููุณุชุฎุฏู (ุงูุจุงุฆุน) ุงูุฐู ุฃุถุงูู    |
| `category_id`     | INT (FK)      | ุงูุชุตููู ุงูุชุงุจุน ูู ุงูููุชุฌ         | ูุชุญุฏูุฏ ููุน ุงูููุชุฌ                            |
| `name`            | VARCHAR(255)  | ุงุณู ุงูููุชุฌ (ูุฑูุฏ)                | ุงูุงุณู ุงูุธุงูุฑ ููููุชุฌ                          |
| `stock`           | INT           | ุงููููุฉ ุงููุชุงุญุฉ ูู ุงููุฎุฒูู        | ุนุฏุฏ ุงููุญุฏุงุช ุงููุชููุฑุฉ ููุจูุน                   |
| `price`           | DECIMAL(10,2) | ุงูุณุนุฑ ููู ูุญุฏุฉ ูู ุงูููุชุฌ         | ุงูุณุนุฑ ุงููุนุฑูุถ ููุดุฑุงุก                         |
| `description`     | TEXT          | ูุตู ููุตู ููููุชุฌ                  | ูุชูุถูุญ ุงูุชูุงุตูู ูุงููููุฒุงุช                    |
| `image_url`       | TEXT          | ุฑุงุจุท ุตูุฑุฉ ุงูููุชุฌ                 | ูุณุชุฎุฏู ูุนุฑุถ ุตูุฑุฉ ุงูููุชุฌ ูู ุงููุงุฌูุฉ           |
| `rating`          | INT           | ุงูุชูููู ุงูุนุงู ููููุชุฌ (ุงูุชุฑุงุถู 0) | ููุธูุฑ ุชูููู ุงููุดุชุฑูู ููููุชุฌ                  |
| `commission_rate` | DECIMAL(10,2) | ูุณุจุฉ ุงูุนูููุฉ ุงูููุชุทุนุฉ ูู ุงููููุน  | ูุซูุงู 10 ุชุนูู 10% ูุฐูุจ ูููููุน ูุงูุจุงูู ููุจุงุฆุน |
| `create_at`       | TIMESTAMP     | ุชุงุฑูุฎ ุฅุถุงูุฉ ุงูููุชุฌ               | ูุชู ุชู ุฅุฏุฑุงุฌ ุงูููุชุฌ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช        |

---

## ๐พ ุฌุฏูู: `save_product`

| ุงุณู ุงูุญูู    | ุงูููุน     | ุงููุตู ุงูููู              | ูุธููุฉ ุงูุญูู ุจุงูุนุฑุจู                        |
| ------------ | --------- | ------------------------ | ------------------------------------------ |
| `id`         | INT (PK)  | ูุนุฑู ูุฑูุฏ ูุญูุธ ุงูููุชุฌ    | ูู ูุฑุฉ ูุชู ูููุง ุญูุธ ููุชุฌ ูู ูุจู ูุณุชุฎุฏู     |
| `user_id`    | INT (FK)  | ุงููุณุชุฎุฏู ุงูุฐู ุญูุธ ุงูููุชุฌ | ูุฑุจุท ุจูู ุงููุณุชุฎุฏู ูุงูููุชุฌ ุงููุญููุธ          |
| `product_id` | INT (FK)  | ุงูููุชุฌ ุงูุฐู ุชู ุญูุธู      | ูุฏู ุนูู ุงูููุชุฌ ุงููุญููุธ                     |
| `create_at`  | TIMESTAMP | ุชุงุฑูุฎ ุงูุญูุธ              | ูุชู ูุงู ุงููุณุชุฎุฏู ุจุญูุธ ูุฐุง ุงูููุชุฌ ูู ูุงุฆูุชู |

---

## ๐ ุฌุฏูู: `cart`

| ุงุณู ุงูุญูู    | ุงูููุน         | ุงููุตู ุงูููู                   | ูุธููุฉ ุงูุญูู ุจุงูุนุฑุจู                       |
| ------------ | ------------- | ----------------------------- | ----------------------------------------- |
| `id`         | INT (PK)      | ูุนุฑู ูุฑูุฏ ููุณูุฉ               | ุฑูู ุชุนุฑููู ููู ุณูุฉ ูุดุชุฑูุงุช                |
| `user_id`    | INT (FK)      | ุงููุณุชุฎุฏู ุตุงุญุจ ุงูุณูุฉ           | ูุฑุจุท ุงูุณูุฉ ุจุงููุณุชุฎุฏู ุงูุฐู ุฃุถุงู ููุชุฌุงุชูุง   |
| `is_paid`    | BOOLEAN       | ุญุงูุฉ ุงูุฏูุน ููุณูุฉ              | true = ุชู ุงูุฏูุนุ false = ูู ูุชู ุงูุฏูุน ุจุนุฏ |
| `totalPrice` | DECIMAL(10,2) | ุงููุฌููุน ุงูููู ูุฃุณุนุงุฑ ุงูููุชุฌุงุช | ุงูุณุนุฑ ุงูุฅุฌูุงูู ููู ุงูููุชุฌุงุช ุงููุถุงูุฉ       |
| `create_at`  | TIMESTAMP     | ุชุงุฑูุฎ ุฅูุดุงุก ุงูุณูุฉ             | ูุชู ุชู ุฅูุดุงุก ูุฐู ุงูุณูุฉ                    |

---

## ๐งพ ุฌุฏูู: `cart_item`

| ุงุณู ุงูุญูู    | ุงูููุน     | ุงููุตู ุงูููู                      | ูุธููุฉ ุงูุญูู ุจุงูุนุฑุจู                 |
| ------------ | --------- | -------------------------------- | ----------------------------------- |
| `id`         | INT (PK)  | ูุนุฑู ูุฑูุฏ ููุจูุฏ ุฏุงุฎู ุงูุณูุฉ       | ูู ููุชุฌ ูู ุงูุณูุฉ ูููู ูู ุณุทุฑ ูููุตู  |
| `cart_id`    | INT (FK)  | ุฑูู ุงูุณูุฉ ุงูุชู ููุชูู ุฅูููุง ุงูุจูุฏ | ูุฑุจุท ุงูุนูุตุฑ ุจุงูุณูุฉ ุงูุฃุตููุฉ          |
| `product_id` | INT (FK)  | ุฑูู ุงูููุชุฌ                       | ุงูููุชุฌ ุงูุฐู ุฃูุถูู ุฅูู ุงูุณูุฉ         |
| `quantity`   | INT       | ุงููููุฉ ุงููุทููุจุฉ ูู ุงูููุชุฌ        | ุนุฏุฏ ุงููุทุน ุงูุชู ูุฑูุฏ ุงููุณุชุฎุฏู ุดุฑุงุฆูุง |
| `create_at`  | TIMESTAMP | ุชุงุฑูุฎ ุงูุฅุถุงูุฉ                    | ูุชู ุชู ุฅุถุงูุฉ ูุฐุง ุงูุนูุตุฑ ููุณูุฉ       |

---

## ๐ฐ ุฌุฏูู: `transactions`

| ุงุณู ุงูุญูู         | ุงูููุน                                | ุงููุตู ุงูููู                                   | ูุธููุฉ ุงูุญูู ุจุงูุนุฑุจู                                 |
| ----------------- | ------------------------------------ | --------------------------------------------- | --------------------------------------------------- |
| `id`              | INT (PK)                             | ูุนุฑู ูุฑูุฏ ูููุนุงููุฉ ุงููุงููุฉ                    | ุฑูู ููู ุนูููุฉ ูุงููุฉ ูุฑูุฏุฉ                           |
| `user_id`         | INT (FK)                             | ุงููุณุชุฎุฏู ุงูุฐู ูุงู ุจุงูุนูููุฉ                    | ุงููุดุชุฑู ูู ุญุงูุฉ ุงูุฏูุน ุฃู ุงูุจุงุฆุน ูู ุญุงูุฉ ุงูุณุญุจ       |
| `card_id`         | INT (FK, Nullable)                   | ุฑูู ุงูุณูุฉ ุงููุฑุชุจุทุฉ (ุฅู ูุฌุฏุช)                  | ูุชุญุฏูุฏ ุฃู ุณูุฉ ุชุฑุชุจุท ุจูุฐู ุงููุนุงููุฉ (ูู ุญุงูุฉ ุงูุฏูุน)   |
| `type`            | ENUM('PAYMENT', 'WITHDRAWAL')        | ููุน ุงููุนุงููุฉ: ุฏูุน ุฃู ุณุญุจ                      | ุชุญุฏุฏ ุฅุฐุง ูุงูุช ุงูุนูููุฉ ุฏูุน ูู ุนููู ุฃู ุณุญุจ ูุจุงุฆุน      |
| `amount`          | DECIMAL(10,2)                        | ูููุฉ ุงููุนุงููุฉ ุงููุงููุฉ                         | ุงููุจูุบ ุจุงูุฏููุงุฑ (ุฃู ุงูุนููุฉ ุงููุฎุชุงุฑุฉ)                |
| `currency`        | VARCHAR(10)                          | ุงูุนููุฉ ุงููุณุชุฎุฏูุฉ (ุงูุชุฑุงุถู USD)                | ุงูุนููุฉ ุงูุชู ุชู ุงูุฏูุน ุจูุง                            |
| `status`          | ENUM('PENDING','COMPLETED','FAILED') | ุญุงูุฉ ุงููุนุงููุฉ                                 | ูุชุชุจุน ูุฌุงุญ ุฃู ูุดู ุงููุนุงููุฉ                          |
| `paypal_order_id` | VARCHAR(255) (Nullable)              | ุฑูู ุงูุนูููุฉ ูู PayPal ุนูุฏ ุงูุฏูุน               | ููุณุชุฎุฏู ูุชุชุจุน ุงูุนูููุฉ ูุน PayPal                     |
| `payout_batch_id` | VARCHAR(255) (Nullable)              | ุฑูู ุงูุฏูุนุฉ ูู PayPal ุนูุฏ ุฅุฑุณุงู ุงูุฃููุงู ููุจุงุฆุน | ููุณุชุฎุฏู ูุชุชุจุน ุนูููุฉ ุงูุชุญููู ุนูุฏ ุงุณุชุฎุฏุงู Payouts API |
| `created_at`      | TIMESTAMP                            | ุชุงุฑูุฎ ุชุณุฌูู ุงููุนุงููุฉ                          | ููุช ุชูููุฐ ุงููุนุงููุฉ                                  |



-- CREATE TABLE IF NOT EXISTS Payment(
--     id INT PRIMARY KEY AUTO_INCREMENT,
--     user_id INT NOT NULL,
--     cart_id INT NOT NULL,
--     paypal_order_id VARCHAR(255),
--     amount DECIMAL(10, 2),
--     currency VARCHAR(10),
--     status ENUM('COMPLETED','PENDING'),
--     payment_method VARCHAR(50),
--     created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     FOREIGN KEY (user_id) REFERENCES Users(id)ON DELETE CASCADE,
--     FOREIGN KEY (cart_id) REFERENCES Cart(id)ON DELETE CASCADE
-- );

-- CREATE TABLE IF NOT EXISTS Withdrawals (
--   id INT PRIMARY KEY AUTO_INCREMENT,
--   user_id INT NOT NULL,
--   amount DECIMAL(10,2) NOT NULL,
--   status ENUM('PENDING', 'COMPLETED', 'FAILED') DEFAULT 'PENDING',
--   paypal_email VARCHAR(100) NOT NULL,
--   payout_batch_id VARCHAR(100),
--   create_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--   FOREIGN KEY (user_id) REFERENCES Users(id) ON DELETE CASCADE
-- );


1. ุงููุณุชุฎุฏู ูุถูู ููุชุฌ ุฅูู ุงูุณูุฉ (Cart & Cart_item)
2. ุงููุณุชุฎุฏู ูุถุบุท "ุงูุฏูุน"
3. ุงูุณูุฑูุฑ ููุดุฆ PayPal order => /create-order
4. ุงููุฑููุช ูุณุชุฏุนู SDK ูู PayPal ูุนุฑุถ ูุงุฌูุฉ ุงูุฏูุน
5. ุงููุณุชุฎุฏู ูุคูุฏ ุงูุฏูุน => orderID ูุชู ุฅุฑุณุงูู ููุณูุฑูุฑ
6. ุงูุณูุฑูุฑ ูุณุชุฏุนู PayPal Capture API
7. ุฅุฐุง ุงูุฏูุน ุชู ุจูุฌุงุญ:
    - ูุณุฌู ูู ุฌุฏูู Payment
    - ูุณุชุฎุฑุฌ ูู ุงูููุชุฌุงุช ูู ุงูุณูุฉ
    - ููู ููุชุฌ:
        - ูุญุณุจ ุงูุนูููุฉ
        - ูุถูู ุงููุจูุบ ุฅูู ุญุณุงุจ ุตุงุญุจ ุงูููุชุฌ
    - ููุฑุบ ุงูุณูุฉ ุฃู ูุนูู ุฃููุง ูุฏููุนุฉ

POST /api/paypal/create-order
// returns { orderID }

POST /api/paypal/capture-order
// ูุฑุณู orderIDุ ุซู ูุณุฌู ุงูุฏูุนุ ููุญุฏุซ ุฑุตูุฏ ุงูุจุงุฆุน

